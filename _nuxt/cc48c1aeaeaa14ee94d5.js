(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{267:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(100);var r=n(119);function c(e){return function(e){if(Array.isArray(e))return Object(o.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},323:function(e,t,n){"use strict";n.r(t);n(19),n(20),n(40),n(56),n(67),n(76),n(35),n(13),n(45);var o=n(267),r=(n(34),n(7)),c=n(21),l=n(118),d=n(22),v=n(23),h=n(9),m=n(8),f=n(55),y=n(121);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(v.a)(this,n)}}var _=function(e,t,n,desc){var o,r=arguments.length,c=r<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(r<3?o(c):r>3?o(t,n,c):o(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c},w=new(n(269).a.Tour)({defaultStepOptions:{classes:"shadow-md bg-purple-dark",scrollTo:!0}});w.addStep({text:"You can see your meeting locations here. We've already added a unique video chat link for you.",attachTo:{element:".card-content h1",on:"bottom"},buttons:[{text:"Next",action:w.next}]}),w.addStep({text:"Add some more locations, like phone numbers and addresses. Your assistant will recommend these locations.",attachTo:{element:".card-content h2",on:"left"},buttons:[{text:"Next",action:w.next}]}),w.addStep({text:"Once you're done adding locations, click on Settings to continue.",attachTo:{element:".menu-list li:nth-child(3)",on:"left"}});var O=function(e){Object(d.a)(_,e);var t,n,v,h,m,f=L(_);function _(){var e;return Object(c.a)(this,_),(e=f.apply(this,arguments)).loading=!1,e.loadingAdd=!1,e.loadingSave=!1,e.loadingSettings=!1,e.location={data:[]},e.team={},e.truncate=y.a,e.newLocationValue="",e.newLocationType="VIDEO_CALL",e.newLocationService="Jitsi Meet",e}return Object(l.a)(_,[{key:"mounted",value:(m=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("tour-finished")||w.start(),this.loadingSettings=!0,e.prev=2,e.next=5,this.$axios.get("/organizations/".concat(this.$route.params.username,"?select=schedulingLocation"));case 5:t=e.sent,data=t.data,this.team=data,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:return this.loadingSettings=!1,e.abrupt("return",this.get());case 14:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return m.apply(this,arguments)})},{key:"beforeDestroy",value:function(){w.complete()}},{key:"get",value:(h=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/organizations/".concat(this.$route.params.username,"/locations?first=10").concat(this.location.data.length?"&after=".concat(this.location.data[this.location.data.length-1].id):""));case 4:n=e.sent,data=n.data,(t=this.location.data).push.apply(t,Object(o.a)(data.data||[])),this.location.hasMore=data.hasMore,this.location=data,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:this.loading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return h.apply(this,arguments)})},{key:"add",value:(v=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingAdd=!0,e.prev=1,e.next=4,this.$axios.put("/organizations/".concat(this.$route.params.username,"/locations"),{value:this.newLocationValue,type:this.newLocationType,data:this.newLocationService&&"Other"!==this.newLocationService&&"VIDEO_CALL"===this.newLocationType?JSON.stringify({name:this.newLocationService,template:"{{name}}: {{value}}"}):void 0});case 4:t=e.sent,data=t.data,this.location.data.push(data.added),this.newLocationValue="",this.newLocationType="",e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:this.loadingAdd=!1;case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return v.apply(this,arguments)})},{key:"save",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingSave=!0,e.prev=1,e.next=4,this.$axios.patch("/organizations/".concat(this.$route.params.username),{schedulingLocation:this.team.schedulingLocation});case 4:t=e.sent,data=t.data,this.team=data.updated,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:this.loadingSave=!1;case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return n.apply(this,arguments)})},{key:"deleteLocation",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$buefy.dialog.confirm({title:"Removing location",message:"Are you sure you want to remove this location? This action is not reversible, and you'll have to add it again if you change your mind.",confirmText:"Yes, remove location",cancelText:"No, don't remove",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,e.prev=1,e.next=4,n.$axios.delete("/organizations/".concat(n.$route.params.username,"/locations/").concat(t));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return n.location={data:[]},e.abrupt("return",n.get());case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"locationTypeLabel",value:function(e){return"IN_PERSON"===e?"In-person meeting":"PHONE_CALL"===e?"Phone call":"VIDEO_CALL"===e?"Video call":e}},{key:"locationName",value:function(e){if(e.data){var data={};try{data=JSON.parse(e.data)}catch(e){}if(data.template){var t=data.template;if(Object.keys(data).forEach((function(e){t=t.replace("{{".concat(e,"}}"),data[e])})),Object.keys(e).forEach((function(n){t=t.replace("{{".concat(n,"}}"),e[n])})),t)return t}}return e.value}},{key:"newLocationLabel",get:function(){return"IN_PERSON"===this.newLocationType?"Address":"PHONE_CALL"===this.newLocationType?"Phone number":"VIDEO_CALL"===this.newLocationType?"URL or details":"Details"}},{key:"newLocationMessage",get:function(){return"PHONE_CALL"===this.newLocationType?"Phone number with country code":"VIDEO_CALL"===this.newLocationType&&["Jitsi Meet","Zoom","Google Meet","Whereby"].includes(this.newLocationService)?"Link to join the call":"VIDEO_CALL"===this.newLocationType&&["Messenger","Skype","Telegram","WhatsApp","Viber","Houseparty","Signal","LINE","WeChat"].includes(this.newLocationService)?"Phone number or username to call":"VIDEO_CALL"===this.newLocationType?"Details to join call (like a link or username)":void 0}}]),_}(f.b),S=O=_([Object(f.a)({middleware:"authenticated",layout:"teams"})],O),k=n(14),component=Object(k.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"is-size-4"},[e._v("Locations")]),e._v(" "),n("b-table",{attrs:{loading:e.loading,data:e.location.data,"default-sort-direction":"asc","sort-icon":"arrow-up","sort-icon-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-table-column",{attrs:{sortable:"",field:"type",label:"Type"}},[n("span",[e._v(e._s(e.locationTypeLabel(t.row.type)))])]),e._v(" "),n("b-table-column",{attrs:{sortable:"",field:"value",label:"Location"}},[n("span",[e._v(e._s(e.truncate(e.locationName(t.row))))])]),e._v(" "),n("b-table-column",{staticClass:"has-text-right"},[n("b-tooltip",{attrs:{label:"Remove"}},[n("b-button",{attrs:{type:"is-danger","icon-right":"delete"},on:{click:function(n){return e.deleteLocation(t.row.id)}}})],1)],1)]}}])}),e._v(" "),n("div",{staticClass:"has-text-centered"},[e.location.hasMore?n("b-button",{attrs:{"icon-right":"arrow-down",loading:e.loading},on:{click:e.get}},[e._v("\n      Load more location\n    ")]):e._e()],1),e._v(" "),n("h2",{staticClass:"is-size-5",staticStyle:{"margin-top":"1rem"}},[e._v("Add location")]),e._v(" "),n("form",{staticStyle:{"margin-top":"0.5rem"},on:{submit:function(t){return t.preventDefault(),e.add(t)}}},[n("b-field",{attrs:{label:"Type"}},[n("div",{staticClass:"block"},[n("b-radio",{attrs:{name:"newLocationType","native-value":"VIDEO_CALL"},model:{value:e.newLocationType,callback:function(t){e.newLocationType=t},expression:"newLocationType"}},[e._v("\n          "+e._s(e.locationTypeLabel("VIDEO_CALL"))+"\n        ")]),e._v(" "),n("b-radio",{attrs:{name:"newLocationType","native-value":"PHONE_CALL"},model:{value:e.newLocationType,callback:function(t){e.newLocationType=t},expression:"newLocationType"}},[e._v("\n          "+e._s(e.locationTypeLabel("PHONE_CALL"))+"\n        ")]),e._v(" "),n("b-radio",{attrs:{name:"newLocationType","native-value":"IN_PERSON"},model:{value:e.newLocationType,callback:function(t){e.newLocationType=t},expression:"newLocationType"}},[e._v("\n          "+e._s(e.locationTypeLabel("IN_PERSON"))+"\n        ")])],1)]),e._v(" "),n("div",{staticClass:"columns"},["VIDEO_CALL"===e.newLocationType?n("div",{staticClass:"column"},[n("b-field",{attrs:{label:"Service"}},[n("b-select",{attrs:{placeholder:"Select a service",expanded:""},model:{value:e.newLocationService,callback:function(t){e.newLocationService=t},expression:"newLocationService"}},[n("option",[e._v("Jitsi Meet")]),e._v(" "),n("option",[e._v("Zoom")]),e._v(" "),n("option",[e._v("Google Meet")]),e._v(" "),n("option",[e._v("Skype")]),e._v(" "),n("option",[e._v("Whereby")]),e._v(" "),n("option",[e._v("Messenger")]),e._v(" "),n("option",[e._v("Telegram")]),e._v(" "),n("option",[e._v("WhatsApp")]),e._v(" "),n("option",[e._v("Viber")]),e._v(" "),n("option",[e._v("Houseparty")]),e._v(" "),n("option",[e._v("Signal")]),e._v(" "),n("option",[e._v("LINE")]),e._v(" "),n("option",[e._v("WeChat")]),e._v(" "),n("option",[e._v("Other")])])],1)],1):e._e(),e._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:e.newLocationLabel,message:e.newLocationMessage}},[n("b-input",{attrs:{icon:"IN_PERSON"===e.newLocationType?"map":"VIDEO_CALL"===e.newLocationType?"link":"phone",type:"text",required:""},model:{value:e.newLocationValue,callback:function(t){e.newLocationValue=t},expression:"newLocationValue"}})],1)],1)]),e._v(" "),n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingAdd}},[e._v("\n      Add location\n    ")])],1),e._v(" "),n("form",{staticStyle:{"margin-top":"1.5rem"},on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("h1",{staticClass:"is-size-5",staticStyle:{margin:"1rem 0 0.5rem"}},[e._v("Default location")]),e._v(" "),n("p",{staticStyle:{"margin-bottom":"1rem"}},[e._v("\n      If you don't specify a location in your email, we'll use your default\n      location.\n    ")]),e._v(" "),n("b-field",[n("b-select",{attrs:{expanded:"",required:""},model:{value:e.team.schedulingLocation,callback:function(t){e.$set(e.team,"schedulingLocation",t)},expression:"team.schedulingLocation"}},e._l(e.location.data,(function(t,o){return n("option",{key:"l"+o+t.id,domProps:{value:t.id}},[e._v("\n          "+e._s(e.locationName(t))+"\n        ")])})),0)],1),e._v(" "),n("div",{staticStyle:{"margin-top":"1rem"}},[n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingSave}},[e._v("\n        Update default location\n      ")])],1),e._v(" "),n("b-loading",{attrs:{"is-full-page":!1,active:e.loadingSettings},on:{"update:active":function(t){e.loadingSettings=t}}})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);