(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{348:function(e,t,r){"use strict";r.r(t);r(19),r(20),r(13),r(40),r(41),r(120),r(34);var n=r(7),o=r(21),c=r(118),l=r(22),d=r(23),v=r(9),m=r(8),f=r(55);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(v.a)(e);if(t){var o=Object(v.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var k=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},_=function(e){Object(l.a)(f,e);var t,r,d,v,m=h(f);function f(){var e;return Object(o.a)(this,f),(e=m.apply(this,arguments)).loading=!1,e.loadingUpdate=!1,e.loadingDelete=!1,e.accessToken={},e.scopes=[],e.expiresAt=new Date,e}return Object(c.a)(f,[{key:"created",value:(v=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get());case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"get",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/users/".concat(this.$route.params.username,"/access-tokens/").concat(this.$route.params.id));case 4:t=e.sent,data=t.data,this.accessToken=data,this.scopes=(data.scopes||"").split(",").map((function(i){return i.trim()})),this.expiresAt=new Date(data.expiresAt),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.$router.push("/users/".concat(this.$route.params.username,"/access-tokens"));case 14:this.loading=!1;case 15:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return d.apply(this,arguments)})},{key:"save",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingUpdate){e.next=2;break}return e.abrupt("return");case 2:return this.loadingUpdate=!0,e.prev=3,e.next=6,this.$axios.patch("/users/".concat(this.$route.params.username,"/access-tokens/").concat(this.$route.params.id),{name:this.accessToken.name,description:this.accessToken.description,scopes:this.scopes.join(", "),expiresAt:this.expiresAt});case 6:t=e.sent,data=t.data,this.accessToken=data.updated,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:this.loadingUpdate=!1;case 14:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(){return r.apply(this,arguments)})},{key:"deleteAccessToken",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingDelete){e.next=2;break}return e.abrupt("return");case 2:this.$buefy.dialog.confirm({title:"Deleting accessToken",message:"Are you sure you want to delete your access token <strong>".concat(r,"</strong>? This action is not reversible, and this access token will stop working immediately."),confirmText:"Yes, delete accessToken",cancelText:"No, don't delete",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.loadingDelete=!0,e.prev=1,e.next=4,o.$axios.delete("/users/".concat(o.$route.params.username,"/access-tokens/").concat(t));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:o.$router.push("/users/".concat(o.$route.params.username,"/access-tokens"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),f}(f.b),y=_=k([Object(f.a)({middleware:"authenticated",layout:"users"})],_),x=r(14),component=Object(x.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"is-size-4",staticStyle:{"margin-bottom":"1rem"}},[r("b-button",{staticStyle:{"margin-right":"1rem"},attrs:{tag:"nuxt-link",to:"/users/"+e.$route.params.username+"/access-tokens","icon-right":"arrow-left"}}),e._v(" "),r("span",[e._v("Access Token")]),e._v(" "),e.accessToken.jwtAccessToken?r("code",[e._v("\n      "+e._s(e.accessToken.jwtAccessToken)+"\n    ")]):e._e()],1),e._v(" "),r("form",{staticStyle:{margin:"0.5rem 0 1.5rem"},on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[r("b-field",{attrs:{label:"Name"}},[r("b-input",{attrs:{type:"text"},model:{value:e.accessToken.name,callback:function(t){e.$set(e.accessToken,"name",t)},expression:"accessToken.name"}})],1),e._v(" "),r("b-field",{attrs:{label:"Description"}},[r("b-input",{attrs:{type:"textarea"},model:{value:e.accessToken.description,callback:function(t){e.$set(e.accessToken,"description",t)},expression:"accessToken.description"}})],1),e._v(" "),r("b-field",{attrs:{label:"Scopes"}},[r("b-select",{attrs:{multiple:"",expanded:""},model:{value:e.scopes,callback:function(t){e.scopes=t},expression:"scopes"}},[r("option",{attrs:{value:"user:read"}},[e._v("user:read")]),e._v(" "),r("option",{attrs:{value:"user:update"}},[e._v("user:update")]),e._v(" "),r("option",{attrs:{value:"user:change-password"}},[e._v("user:change-password")]),e._v(" "),r("option",{attrs:{value:"user:delete"}},[e._v("user:delete")]),e._v(" "),r("option",{attrs:{value:"user:memberships:read"}},[e._v("user:memberships:read")]),e._v(" "),r("option",{attrs:{value:"user:memberships:delete"}},[e._v("user:memberships:delete")]),e._v(" "),r("option",{attrs:{value:"user:memberships:update"}},[e._v("user:memberships:update")]),e._v(" "),r("option",{attrs:{value:"user:2fa:enable"}},[e._v("user:2fa:enable")]),e._v(" "),r("option",{attrs:{value:"user:2fa:disable"}},[e._v("user:2fa:disable")]),e._v(" "),r("option",{attrs:{value:"user:backup-codes:read"}},[e._v("user:backup-codes:read")]),e._v(" "),r("option",{attrs:{value:"user:backup-codes:regenerate"}},[e._v("user:backup-codes:regenerate")]),e._v(" "),r("option",{attrs:{value:"user:access-tokens:create"}},[e._v("user:access-tokens:create")]),e._v(" "),r("option",{attrs:{value:"user:access-tokens:read"}},[e._v("user:access-tokens:read")]),e._v(" "),r("option",{attrs:{value:"user:access-tokens:update"}},[e._v("user:access-tokens:update")]),e._v(" "),r("option",{attrs:{value:"user:access-tokens:delete"}},[e._v("user:access-tokens:delete")]),e._v(" "),r("option",{attrs:{value:"user:emails:create"}},[e._v("user:emails:create")]),e._v(" "),r("option",{attrs:{value:"user:emails:read"}},[e._v("user:emails:read")]),e._v(" "),r("option",{attrs:{value:"user:emails:delete"}},[e._v("user:emails:delete")]),e._v(" "),r("option",{attrs:{value:"user:emails:resend-verification"}},[e._v("user:emails:resend-verification")]),e._v(" "),r("option",{attrs:{value:"user:sessions:create"}},[e._v("user:sessions:create")]),e._v(" "),r("option",{attrs:{value:"user:sessions:read"}},[e._v("user:sessions:read")]),e._v(" "),r("option",{attrs:{value:"user:sessions:delete"}},[e._v("user:sessions:delete")]),e._v(" "),r("option",{attrs:{value:"user:identities:create"}},[e._v("user:identities:create")]),e._v(" "),r("option",{attrs:{value:"user:identities:read"}},[e._v("user:identities:read")]),e._v(" "),r("option",{attrs:{value:"user:identities:delete"}},[e._v("user:identities:delete")])])],1),e._v(" "),r("b-field",{attrs:{label:"Expiry"}},[r("b-datepicker",{attrs:{placeholder:"Click to select...",icon:"calendar-today","trap-focus":""},model:{value:e.expiresAt,callback:function(t){e.expiresAt=t},expression:"expiresAt"}})],1),e._v(" "),r("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingUpdate}},[e._v("\n      Update access token\n    ")])],1),e._v(" "),r("h2",{staticClass:"is-size-5"},[e._v("Danger zone")]),e._v(" "),r("p",{staticStyle:{margin:"1rem 0"}},[e._v("\n    If your access token was compromized or you don't need it anymore, you can\n    delete it.\n  ")]),e._v(" "),r("b-button",{attrs:{type:"is-danger",loading:e.loadingDelete},on:{click:function(t){return e.deleteAccessToken(e.accessToken.id,e.accessToken.name||"Unnamed access token")}}},[e._v("\n    Delete access token\n  ")]),e._v(" "),r("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);