(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{282:function(e,t,n){var content=n(307);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(28).default)("103fa17c",content,!0,{sourceMap:!1})},306:function(e,t,n){"use strict";var o=n(282);n.n(o).a},307:function(e,t,n){(t=n(27)(!1)).push([e.i,".avatar img[data-v-b6b23cec]{box-shadow:0 .25rem .5rem rgba(0,0,0,.1)}.avatar[data-v-b6b23cec]{margin:0 -10px}",""]),e.exports=t},349:function(e,t,n){"use strict";n.r(t);n(19),n(20),n(40),n(41),n(164),n(76),n(34);var o=n(7),r=(n(35),n(13),n(45),n(21)),c=n(118),l=n(22),m=n(23),d=n(9),v=n(8),h=n(6),f=n(55),y=n(65),_=n.n(y),k=n(275),x=n.n(k);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(d.a)(e);if(t){var r=Object(d.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(m.a)(this,n)}}var T=function(e,t,n,desc){var o,r=arguments.length,c=r<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(r<3?o(c):r>3?o(t,n,c):o(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c},w=function(e){Object(l.a)(d,e);var t,n,m=z(d);function d(){var e;return Object(r.a)(this,d),(e=m.apply(this,arguments)).guestName="",e.guestEmail="",e.guestTimezone="America/Los_Angeles",e.guestPicture="",e.duration=30,e.selectedDatetime=new Date,e.showTimezone=!1,e.meetingType="",e.confirmedTime=void 0,e.organization={},e.user={},e.proposedTimes=[],e.filteredTimezonesArray=Object.keys(x.a.getAllTimezones()),e.loading=!1,e.loadingSave=!1,e.completed=!1,e}return Object(c.a)(d,[{key:"mounted",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,o,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof this.$route.query.token){e.next=2;break}return e.abrupt("return",this.$router.replace("/"));case 2:if(!this.$route.query.token.startsWith("short-token")){e.next=12;break}return this.loading=!0,e.next=6,this.$axios.get("/api/full-token/".concat(encodeURIComponent(this.$route.query.token)));case 6:if(!(null!=(o=e.sent.data)?o:"").startsWith("short-token")){e.next=9;break}return e.abrupt("return");case 9:this.token=_()(o),e.next=13;break;case 12:this.token=_()(this.$route.query.token);case 13:return this.token&&(this.guestTimezone=this.token.timezone,this.guestName=this.token.guests[0].name,this.guestEmail=this.token.guests[0].address,this.guestPicture=null!==(n=null===(t=this.token.guests[0].person)||void 0===t?void 0:t.avatar)&&void 0!==n?n:"",this.selectedDatetime=new Date(this.token.datetime)),this.loading=!0,e.prev=15,e.next=18,this.$axios.get("/api/meeting-page/".concat(this.$route.params.username,"/").concat(this.$route.params.meetingId,"?jwt=").concat(encodeURIComponent(this.$route.query.token)));case 18:r=e.sent.data,this.proposedTimes=JSON.parse(r.proposedTimes),this.user=r.user,this.organization=r.organization,this.meetingType=r.meetingType,e.next=27;break;case 25:e.prev=25,e.t0=e.catch(15);case 27:try{c=Intl.DateTimeFormat().resolvedOptions().timeZone,this.guestTimezone!==c&&(this.showTimezone=!0),this.guestTimezone=c}catch(e){}this.loading=!1;case 29:case"end":return e.stop()}}),e,this,[[15,25]])}))),function(){return n.apply(this,arguments)})},{key:"save",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingSave=!0,e.prev=1,e.next=4,this.$axios.post("/api/confirm-meeting/".concat(this.$route.params.username,"/").concat(this.$route.params.meetingId),{token:this.$route.query.token,guestName:this.guestName,guestEmail:this.guestEmail,guestTimezone:this.guestTimezone,duration:this.duration,selectedDatetime:this.selectedDatetime.toISOString()});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:this.loadingSave=!1,this.completed=!0;case 10:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return t.apply(this,arguments)})}]),d}(h.a),S=w=T([Object(f.a)({layout:"meet"})],w),O=(n(306),n(14)),component=Object(O.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.completed?n("div",[n("b-icon",{staticStyle:{"margin-bottom":"1rem"},attrs:{icon:"check-circle",size:"is-large",type:"is-success"}}),e._v(" "),n("h1",{staticClass:"title is-4"},[e._v("Appointment confirmed")]),e._v(" "),e._m(0)],1):e.loading?e._e():n("div",[n("div",{staticStyle:{"margin-bottom":"1.5rem",display:"flex","justify-content":"center"}},[e.user.profilePicture||e.user.name?n("figure",{staticClass:"image avatar is-64x64"},[n("img",{staticClass:"is-rounded",attrs:{src:e.user.profilePicture||"https://ui-avatars.com/api/?name="+e.user.name+"&background=3498db&color=fff"}})]):e._e(),e._v(" "),n("figure",{staticClass:"image avatar is-64x64"},[n("img",{staticClass:"is-rounded",attrs:{src:e.guestPicture||"https://ui-avatars.com/api/?name="+e.guestName+"&background=e74c3c&color=fff"}})])]),e._v(" "),n("h1",{staticClass:"title is-5 has-text-centered"},[e._v("ðŸ‘‹ Hi, "+e._s(e.guestName)+"!")]),e._v(" "),n("div",{staticClass:"content"},[n("p",[e._v("\n      Schedule your "+e._s(e.duration)+"-minute appointment with "+e._s(e.user.name)+".\n    ")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("b-field",{attrs:{label:"Date and time"}},[n("b-datetimepicker",{attrs:{placeholder:"Click to select...",icon:"calendar-today",timepicker:{hourFormat:"12"},"horizontal-time-picker":"",editable:""},model:{value:e.selectedDatetime,callback:function(t){e.selectedDatetime=t},expression:"selectedDatetime"}})],1),e._v(" "),e.showTimezone?n("b-field",[n("template",{slot:"label"},[e._v("\n          Timezone\n          "),n("b-tooltip",{attrs:{type:"is-dark",label:"We need your timezone to show you local times"}},[n("b-icon",{attrs:{size:"is-small",icon:"help-circle-outline"}})],1)],1),e._v(" "),n("b-select",{attrs:{placeholder:"Select a timezone",expanded:""},model:{value:e.guestTimezone,callback:function(t){e.guestTimezone=t},expression:"guestTimezone"}},e._l(e.filteredTimezonesArray,(function(t,i){return n("option",{key:"t"+i+t,domProps:{value:t}},[e._v(e._s(t))])})),0)],2):e._e(),e._v(" "),n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingSave}},[e._v("\n        Confirm appointment\n      ")]),e._v(" "),n("b-collapse",{staticStyle:{"margin-top":"1rem"},attrs:{open:!1,"aria-id":"advancedSettings"}},[n("button",{staticClass:"button is-light is-small",attrs:{slot:"trigger",type:"button","aria-controls":"advancedSettings"},slot:"trigger"},[e._v("\n          Advanced settings\n        ")]),e._v(" "),n("div",{staticStyle:{"margin-top":"1rem"}},[n("b-field",{attrs:{label:"Name"}},[n("b-input",{attrs:{type:"text"},model:{value:e.guestName,callback:function(t){e.guestName=t},expression:"guestName"}})],1),e._v(" "),n("b-field",{attrs:{label:"Email"}},[n("b-input",{attrs:{type:"email"},model:{value:e.guestEmail,callback:function(t){e.guestEmail=t},expression:"guestEmail"}})],1),e._v(" "),n("b-field",{attrs:{label:"Duration"}},[n("b-select",{attrs:{placeholder:"Select a duration",expanded:""},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}},[n("option",{attrs:{value:"15"}},[e._v("15 minutes")]),e._v(" "),n("option",{attrs:{value:"30"}},[e._v("30 minutes")]),e._v(" "),n("option",{attrs:{value:"60"}},[e._v("1 hour")])])],1),e._v(" "),e.showTimezone?e._e():n("b-field",[n("template",{slot:"label"},[e._v("\n              Timezone\n              "),n("b-tooltip",{attrs:{type:"is-dark",label:"We need your timezone to show you local times"}},[n("b-icon",{attrs:{size:"is-small",icon:"help-circle-outline"}})],1)],1),e._v(" "),n("b-select",{attrs:{placeholder:"Select a timezone",expanded:""},model:{value:e.guestTimezone,callback:function(t){e.guestTimezone=t},expression:"guestTimezone"}},e._l(e.filteredTimezonesArray,(function(t,i){return n("option",{key:"t"+i+t,domProps:{value:t}},[e._v(e._s(t))])})),0)],2)],1)])],1),e._v(" "),n("p",{staticStyle:{"margin-top":"1rem"}},[e._v("\n      We'll send you a calendar invitation over email on confirmation.\n    ")])]),e._v(" "),n("b-loading",{attrs:{active:e.loading}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("p",[this._v("\n      You'll a receive a confirmation email with a calendar invitation in a\n      few moments.\n    ")])])}],!1,null,"b6b23cec",null);t.default=component.exports}}]);