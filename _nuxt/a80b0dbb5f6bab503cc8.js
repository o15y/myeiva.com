(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{316:function(e,t,n){"use strict";n.r(t);n(19),n(20),n(13),n(40),n(120),n(34);var r=n(7),o=(n(41),n(21)),c=n(118),l=n(22),d=n(23),v=n(9),m=n(8),h=n(55);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(v.a)(e);if(t){var o=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var y=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},w=function(e){Object(l.a)(v,e);var t,n,d=f(v);function v(){var e;return Object(o.a)(this,v),(e=d.apply(this,arguments)).name="",e.email="",e.password="",e.invitedByUser="",e.completed=!1,e.loading=!1,e.hasPasswordless=!1,e.hasInviteCode=!1,e.resendTime=-2,e.hasAccount=!1,e.resendToken="",e.timer=void 0,e}return Object(c.a)(v,[{key:"mounted",value:function(){var e=this;try{localStorage.getItem("hasAccount")&&(this.hasAccount=!0)}catch(e){}this.timer=window.setInterval((function(){e.resendTime>0&&(e.resendTime-=1)}),1e3)}},{key:"register",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.$axios.post("/auth/register",{name:this.name,email:this.email,password:this.password?this.password:void 0,invitedByUser:this.invitedByUser?this.invitedByUser:void 0});case 6:t=e.sent,data=t.data,this.name="",this.password="",this.invitedByUser="",this.completed=!0,this.resendToken=data.resendToken,this.resendToken&&(this.resendTime=120),localStorage.setItem("hasAccount","1"),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(3);case 19:this.loading=!1,this.password="";case 21:case"end":return e.stop()}}),e,this,[[3,17]])}))),function(){return n.apply(this,arguments)})},{key:"resend",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post("/auth/resend-verification",{email:this.email});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:this.resendTime=-1;case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})},{key:"beforeDestroy",value:function(){window.clearInterval(this.timer),this.timer=void 0}},{key:"emailDomain",get:function(){try{return this.email.split("@")[1]}catch(e){return""}}}]),v}(h.b),_=w=y([Object(h.a)({middleware:"unauthenticated",layout:"auth"})],w),k=n(14),component=Object(k.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hasAccount?n("div",{staticClass:"card card-content",staticStyle:{"margin-bottom":"1.5rem"}},[n("h2",{staticClass:"title is-5"},[e._v("Already created an account?")]),e._v(" "),n("p",{staticStyle:{margin:"-0.5rem 0 1rem 0"}},[e._v("\n      If you've already created an account, you can login.\n    ")]),e._v(" "),n("nuxt-link",{staticClass:"button is-primary",attrs:{to:"/auth/login"}},[e._v("\n      Login to your account →\n    ")])],1):e._e(),e._v(" "),n("h1",{staticClass:"title is-4"},[e._v("Register")]),e._v(" "),e.completed?n("div",[n("img",{attrs:{alt:"",src:"/illustrations/PlantDoodle.svg"}}),e._v(" "),n("h2",{staticClass:"title is-5",staticStyle:{"margin-top":"1rem"}},[e._v("Check your email")]),e._v(" "),n("p",[e._v("\n      We've sent you a link to verify your email. Once you've clicked on the\n      link, you'll be able to log in.\n    ")]),e._v(" "),e.emailDomain?n("div",{staticStyle:{"margin-top":"1rem"}},[n("b-button",{attrs:{tag:"a",target:"_blank",href:"http://"+e.emailDomain,type:"is-primary"}},[e._v("\n        Go to "+e._s(e.emailDomain)+" →\n      ")])],1):e._e(),e._v(" "),e.resendTime>-2?n("div",{staticStyle:{"margin-top":"1rem"}},[-1!==e.resendTime?n("p",[e._v("\n        Didn't receive the email? Check your spam folder or resend in\n        "+e._s(e.resendTime)+"\n        seconds.\n      ")]):n("p",[e._v("Didn't receive the email? We've sent it again.")]),e._v(" "),n("b-button",{staticStyle:{"margin-top":"0.5rem"},attrs:{disabled:0!==e.resendTime},on:{click:function(t){return t.preventDefault(),e.resend(t)}}},[-1===e.resendTime?n("span",[e._v("Resent")]):n("span",[e._v("Resend")])])],1):e._e()]):n("div",{staticClass:"content"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[n("b-field",{attrs:{label:"Name"}},[n("b-input",{attrs:{type:"text",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("b-field",{attrs:{label:"Email"}},[n("b-input",{attrs:{type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),n("b-field",{directives:[{name:"show",rawName:"v-show",value:!e.hasPasswordless,expression:"!hasPasswordless"}],attrs:{label:"Password"}},[n("b-input",{attrs:{type:"password","password-reveal":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),n("b-field",{directives:[{name:"show",rawName:"v-show",value:e.hasInviteCode,expression:"hasInviteCode"}],attrs:{label:"Invitation code"}},[n("b-input",{attrs:{type:"text"},model:{value:e.invitedByUser,callback:function(t){e.invitedByUser=t},expression:"invitedByUser"}})],1),e._v(" "),n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loading}},[e._v("\n        Create an account\n      ")])],1)])])}),[],!1,null,null,null);t.default=component.exports}}]);