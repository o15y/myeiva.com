(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{338:function(e,t,r){"use strict";r.r(t);r(19),r(20),r(13),r(40),r(163),r(34);var n=r(7),o=r(21),c=r(118),l=r(22),d=r(23),f=r(9),y=r(8),m=r(55);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var v=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},k=function(e){Object(l.a)(m,e);var t,r,d,f,y=h(m);function m(){var e;return Object(o.a)(this,m),(e=y.apply(this,arguments)).loading=!1,e.loadingCreate=!1,e.apiKeyName="",e.apiKeys={data:[]},e}return Object(c.a)(m,[{key:"created",value:(f=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get());case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"get",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/organizations/".concat(this.$route.params.username,"/api-keys"));case 4:t=e.sent,data=t.data,this.apiKeys=data,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return d.apply(this,arguments)})},{key:"add",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingCreate=!0,e.prev=1,e.next=4,this.$axios.put("/organizations/".concat(this.$route.params.username,"/api-keys"),{name:this.apiKeyName?this.apiKeyName:void 0});case 4:t=e.sent,data=t.data,this.apiKeys.data.push(data.added),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:this.apiKeyName="",this.loadingCreate=!1;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return r.apply(this,arguments)})},{key:"deleteApiKey",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$buefy.dialog.confirm({title:"Deleting API key",message:"Are you sure you want to delete your API key <strong>".concat(r,"</strong>? This action is not reversible, and this API key will stop working immediately."),confirmText:"Yes, delete API key",cancelText:"No, don't delete",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.loading=!0,e.prev=1,e.next=4,o.$axios.delete("/organizations/".concat(o.$route.params.username,"/api-keys/").concat(t));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return o.apiKeys={data:[]},e.abrupt("return",o.get());case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"hasUnrestrictedApiKey",get:function(){return!!this.apiKeys.data.find((function(i){return!(i.ipRestrictions||i.referrerRestrictions||i.scopes)}))}}]),m}(m.b),w=k=v([Object(m.a)({middleware:"authenticated",layout:"teams"})],k),_=r(14),component=Object(_.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"is-size-4",staticStyle:{"margin-bottom":"1rem"}},[e._v("API keys")]),e._v(" "),e.hasUnrestrictedApiKey?r("b-message",{staticStyle:{"margin-top":"1rem"},attrs:{type:"is-warning","has-icon":""}},[e._v("\n    You have one or more unrestricted API keys in your team. It's recommended\n    to add scope, referrer, or IP address restrictions.\n  ")]):e._e(),e._v(" "),r("b-table",{attrs:{loading:e.loading,data:e.apiKeys.data,"default-sort-direction":"asc","sort-icon":"arrow-up","sort-icon-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-table-column",{attrs:{sortable:"",field:"name",label:"Name"}},[e._v("\n        "+e._s(t.row.name||"Unnamed API key")+"\n        "),t.row.ipRestrictions||t.row.referrerRestrictions||t.row.scopes?e._e():r("b-tooltip",{attrs:{label:"Unrestricted"}},[r("b-icon",{attrs:{icon:"alert",type:"is-warning"}})],1)],1),e._v(" "),r("b-table-column",{attrs:{sortable:"",field:"jwtApiKey",label:"API key"}},[r("code",[e._v(e._s(t.row.jwtApiKey))])]),e._v(" "),r("b-table-column",{attrs:{sortable:"",field:"createdAt",label:"Added"}},[e._v("\n        "+e._s(new Date(t.row.createdAt).toLocaleDateString())+"\n      ")]),e._v(" "),r("b-table-column",{staticClass:"has-text-right"},[r("b-tooltip",{attrs:{label:"Edit"}},[r("b-button",{attrs:{tag:"nuxt-link",to:"/teams/"+e.$route.params.username+"/developers/api-keys/"+t.row.id,type:"is-primary","icon-right":"pencil",outlined:""}})],1),e._v(" "),r("b-tooltip",{attrs:{label:"Delete"}},[r("b-button",{attrs:{type:"is-danger","icon-right":"delete",outlined:""},on:{click:function(r){return e.deleteApiKey(t.row.id,t.row.name||"Unnamed API key")}}})],1)],1)]}}])}),e._v(" "),r("h2",{staticClass:"is-size-5",staticStyle:{"margin-top":"1rem"}},[e._v("Create an API key")]),e._v(" "),r("p",[e._v("\n    You'll be able to add restrictions such as scopes, referrers, IP\n    addresses, and expiry after creating the API key.\n  ")]),e._v(" "),r("form",{staticStyle:{margin:"0.5rem 0 1.5rem"},on:{submit:function(t){return t.preventDefault(),e.add(t)}}},[r("b-field",{attrs:{label:"Name"}},[r("b-input",{attrs:{type:"text"},model:{value:e.apiKeyName,callback:function(t){e.apiKeyName=t},expression:"apiKeyName"}})],1),e._v(" "),r("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingCreate}},[e._v("\n      Create API key\n    ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);