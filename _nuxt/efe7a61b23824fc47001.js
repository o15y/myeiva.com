(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{345:function(e,t,r){"use strict";r.r(t);r(19),r(20),r(13),r(40),r(41),r(120),r(34);var o=r(7),n=r(21),c=r(118),l=r(22),v=r(23),d=r(9),m=r(8),f=r(55);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(d.a)(e);if(t){var n=Object(d.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(v.a)(this,r)}}var y=function(e,t,r,desc){var o,n=arguments.length,c=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(n<3?o(c):n>3?o(t,r,c):o(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},h=function(e){Object(l.a)(f,e);var t,r,v,d,m=_(f);function f(){var e;return Object(n.a)(this,f),(e=m.apply(this,arguments)).loading=!1,e.loadingUpdate=!1,e.loadingDelete=!1,e.apiKey={},e.scopes=[],e.ipRestrictions=[],e.referrerRestrictions=[],e.expiresAt=new Date,e}return Object(c.a)(f,[{key:"created",value:(d=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get());case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"get",value:(v=Object(o.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/organizations/".concat(this.$route.params.username,"/api-keys/").concat(this.$route.params.id));case 4:t=e.sent,data=t.data,this.apiKey=data,this.scopes=(data.scopes||"").split(",").map((function(i){return i.trim()})),this.expiresAt=new Date(data.expiresAt),data.ipRestrictions&&(this.ipRestrictions=(data.ipRestrictions||[]).split(",").map((function(i){return i.trim()}))),data.referrerRestrictions&&(this.referrerRestrictions=(data.referrerRestrictions||[]).split(",").map((function(i){return i.trim()}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this.$router.push("/organizations/".concat(this.$route.params.username,"/developers/api-keys"));case 16:this.loading=!1;case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return v.apply(this,arguments)})},{key:"save",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingUpdate){e.next=2;break}return e.abrupt("return");case 2:return this.loadingUpdate=!0,e.prev=3,e.next=6,this.$axios.patch("/organizations/".concat(this.$route.params.username,"/api-keys/").concat(this.$route.params.id),{name:this.apiKey.name,description:this.apiKey.description,scopes:this.scopes.join(", "),ipRestrictions:this.ipRestrictions.join(", ")||void 0,referrerRestrictions:this.referrerRestrictions.join(", ")||void 0,expiresAt:this.expiresAt});case 6:t=e.sent,data=t.data,this.apiKey=data.updated,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:this.loadingUpdate=!1;case 14:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(){return r.apply(this,arguments)})},{key:"deleteApiKey",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingDelete){e.next=2;break}return e.abrupt("return");case 2:this.$buefy.dialog.confirm({title:"Deleting API key",message:"Are you sure you want to delete your API key <strong>".concat(r,"</strong>? This action is not reversible, and this API key will stop working immediately."),confirmText:"Yes, delete API key",cancelText:"No, don't delete",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loadingDelete=!0,e.prev=1,e.next=4,n.$axios.delete("/organizations/".concat(n.$route.params.username,"/api-keys/").concat(t));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:n.$router.push("/teams/".concat(n.$route.params.username,"/developers/api-keys"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),f}(f.b),k=h=y([Object(f.a)({middleware:"authenticated",layout:"teams"})],h),x=r(14),component=Object(x.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"is-size-4",staticStyle:{"margin-bottom":"1rem"}},[r("b-button",{staticStyle:{"margin-right":"1rem"},attrs:{tag:"nuxt-link",to:"/teams/"+e.$route.params.username+"/developers/api-keys","icon-right":"arrow-left"}}),e._v(" "),r("span",[e._v("API key")]),e._v(" "),e.apiKey.jwtApiKey?r("code",[e._v("\n      "+e._s(e.apiKey.jwtApiKey)+"\n    ")]):e._e()],1),e._v(" "),r("form",{staticStyle:{margin:"0.5rem 0 1.5rem"},on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[r("b-field",{attrs:{label:"Name"}},[r("b-input",{attrs:{type:"text"},model:{value:e.apiKey.name,callback:function(t){e.$set(e.apiKey,"name",t)},expression:"apiKey.name"}})],1),e._v(" "),r("b-field",{attrs:{label:"Description"}},[r("b-input",{attrs:{type:"textarea"},model:{value:e.apiKey.description,callback:function(t){e.$set(e.apiKey,"description",t)},expression:"apiKey.description"}})],1),e._v(" "),r("b-field",{attrs:{label:"Scopes"}},[r("b-select",{attrs:{multiple:"",expanded:""},model:{value:e.scopes,callback:function(t){e.scopes=t},expression:"scopes"}},[r("option",{attrs:{value:"org:read"}},[e._v("org:read")]),e._v(" "),r("option",{attrs:{value:"org:update"}},[e._v("org:update")]),e._v(" "),r("option",{attrs:{value:"org:delete"}},[e._v("org:delete")]),e._v(" "),r("option",{attrs:{value:"org:billing:read"}},[e._v("org:billing:read")]),e._v(" "),r("option",{attrs:{value:"org:billing:update"}},[e._v("org:billing:update")]),e._v(" "),r("option",{attrs:{value:"org:invoices:read"}},[e._v("org:invoices:read")]),e._v(" "),r("option",{attrs:{value:"org:sources:read"}},[e._v("org:sources:read")]),e._v(" "),r("option",{attrs:{value:"org:sources:create"}},[e._v("org:sources:create")]),e._v(" "),r("option",{attrs:{value:"org:sources:update"}},[e._v("org:sources:update")]),e._v(" "),r("option",{attrs:{value:"org:sources:delete"}},[e._v("org:sources:delete")]),e._v(" "),r("option",{attrs:{value:"org:subscriptions:read"}},[e._v("org:subscriptions:read")]),e._v(" "),r("option",{attrs:{value:"org:subscriptions:update"}},[e._v("org:subscriptions:update")]),e._v(" "),r("option",{attrs:{value:"org:subscriptions:create"}},[e._v("org:subscriptions:create")]),e._v(" "),r("option",{attrs:{value:"org:plans:read"}},[e._v("org:plans:read")]),e._v(" "),r("option",{attrs:{value:"org:api-key:read"}},[e._v("org:api-key:read")]),e._v(" "),r("option",{attrs:{value:"org:api-key-logs:read"}},[e._v("org:api-key-logs:read")]),e._v(" "),r("option",{attrs:{value:"org:api-key:update"}},[e._v("org:api-key:update")]),e._v(" "),r("option",{attrs:{value:"org:api-key:delete"}},[e._v("org:api-key:delete")]),e._v(" "),r("option",{attrs:{value:"org:api-key:create"}},[e._v("org:api-key:create")]),e._v(" "),r("option",{attrs:{value:"org:domain:read"}},[e._v("org:domain:read")]),e._v(" "),r("option",{attrs:{value:"org:domain:update"}},[e._v("org:domain:update")]),e._v(" "),r("option",{attrs:{value:"org:domain:delete"}},[e._v("org:domain:delete")]),e._v(" "),r("option",{attrs:{value:"org:domain:create"}},[e._v("org:domain:create")]),e._v(" "),r("option",{attrs:{value:"org:domain:verify"}},[e._v("org:domain:verify")]),e._v(" "),r("option",{attrs:{value:"org:webhook:read"}},[e._v("org:webhook:read")]),e._v(" "),r("option",{attrs:{value:"org:webhook:update"}},[e._v("org:webhook:update")]),e._v(" "),r("option",{attrs:{value:"org:webhook:delete"}},[e._v("org:webhook:delete")]),e._v(" "),r("option",{attrs:{value:"org:webhook:create"}},[e._v("org:webhook:create")]),e._v(" "),r("option",{attrs:{value:"org:membership:read"}},[e._v("org:membership:read")]),e._v(" "),r("option",{attrs:{value:"org:membership:update"}},[e._v("org:membership:update")]),e._v(" "),r("option",{attrs:{value:"org:membership:delete"}},[e._v("org:membership:delete")]),e._v(" "),r("option",{attrs:{value:"org:membership:create"}},[e._v("org:membership:create")]),e._v(" "),r("option",{attrs:{value:"org:transactions:read"}},[e._v("org:transactions:read")]),e._v(" "),r("option",{attrs:{value:"org:transactions:update"}},[e._v("org:transactions:update")]),e._v(" "),r("option",{attrs:{value:"org:transactions:delete"}},[e._v("org:transactions:delete")]),e._v(" "),r("option",{attrs:{value:"org:transactions:create"}},[e._v("org:transactions:create")])])],1),e._v(" "),r("b-field",{attrs:{label:"IP address restrictions"}},[r("b-taginput",{attrs:{icon:"ip-network",placeholder:"Add an IP CIDR"},model:{value:e.ipRestrictions,callback:function(t){e.ipRestrictions=t},expression:"ipRestrictions"}})],1),e._v(" "),r("b-field",{attrs:{label:"Referrer restrictions"}},[r("b-taginput",{attrs:{icon:"domain-plus",placeholder:"Add a domain name"},model:{value:e.referrerRestrictions,callback:function(t){e.referrerRestrictions=t},expression:"referrerRestrictions"}})],1),e._v(" "),r("b-field",{attrs:{label:"Expiry"}},[r("b-datepicker",{attrs:{placeholder:"Click to select...",icon:"calendar-today","trap-focus":""},model:{value:e.expiresAt,callback:function(t){e.expiresAt=t},expression:"expiresAt"}})],1),e._v(" "),r("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingUpdate}},[e._v("\n      Update API key\n    ")])],1),e._v(" "),r("h2",{staticClass:"is-size-5"},[e._v("Danger zone")]),e._v(" "),r("p",{staticStyle:{margin:"1rem 0"}},[e._v("\n    If your API key was compromized or you don't need it anymore, you can\n    delete it.\n  ")]),e._v(" "),r("b-button",{attrs:{type:"is-danger",loading:e.loadingDelete},on:{click:function(t){return e.deleteApiKey(e.apiKey.id,e.apiKey.name||"Unnamed API key")}}},[e._v("\n    Delete API key\n  ")]),e._v(" "),r("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);