(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{314:function(t,e,r){"use strict";r.r(e);r(19),r(20),r(13),r(40),r(76),r(34);var n=r(7),o=r(21),c=r(118),l=r(22),d=r(23),f=r(9),h=r(8),v=r(55);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var y=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},w=function(t){Object(l.a)(d,t);var e,r=m(d);function d(){var t;return Object(o.a)(this,d),(t=r.apply(this,arguments)).email="",t.password="",t.loading=!1,t.hasPasswordless=!1,t.hasAccount=!1,t}return Object(c.a)(d,[{key:"mounted",value:function(){try{localStorage.getItem("hasAccount")&&(this.hasAccount=!0)}catch(t){}}},{key:"login",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n,o,data,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.loading){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,t.prev=3,t.next=6,this.$axios.post("/auth/login",{email:this.email,password:this.hasPasswordless?void 0:this.password});case 6:return o=t.sent,data=o.data,t.next=10,this.$store.dispatch("auth/loginWithTokens",data);case 10:if("2fa"!==t.sent){t.next=13;break}return t.abrupt("return",this.$router.replace("/auth/2fa"));case 13:if(c=this.$store.state.auth.user.memberships,null===(e=null==c?void 0:c.data)||void 0===e?void 0:e.length){t.next=16;break}return t.abrupt("return",this.$router.replace("/onboarding/user"));case 16:this.$router.replace("/teams/".concat(null===(n=null===(r=null==c?void 0:c.data[0])||void 0===r?void 0:r.organization)||void 0===n?void 0:n.username)),t.next=21;break;case 19:t.prev=19,t.t0=t.catch(3);case 21:this.loading=!1,this.email="",this.password="";case 24:case"end":return t.stop()}}),t,this,[[3,19]])}))),function(){return e.apply(this,arguments)})}]),d}(v.b),_=w=y([Object(v.a)({middleware:"unauthenticated",layout:"auth"})],w),j=r(14),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.hasAccount?t._e():r("div",{staticClass:"card card-content",staticStyle:{"margin-bottom":"1.5rem"}},[r("h2",{staticClass:"title is-5"},[t._v("Get your own assistant.")]),t._v(" "),r("p",{staticStyle:{margin:"-0.5rem 0 1rem 0"}},[t._v("\n      If you're just getting started, create your account.\n    ")]),t._v(" "),r("nuxt-link",{staticClass:"button is-primary",attrs:{to:"/auth/register"}},[t._v("Create your account â†’")])],1),t._v(" "),r("h1",{staticClass:"title is-4"},[t._v("Login")]),t._v(" "),r("p",{staticStyle:{margin:"-1rem 0 1rem 0"}},[t._v("\n    If you've already created an account, you can log in below.\n  ")]),t._v(" "),r("div",{staticClass:"content"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("b-field",{attrs:{label:"Email"}},[r("b-input",{attrs:{type:"email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),r("b-field",{directives:[{name:"show",rawName:"v-show",value:!t.hasPasswordless,expression:"!hasPasswordless"}],attrs:{label:"Password"}},[r("b-input",{attrs:{type:"password","password-reveal":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),r("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:t.loading}},[t.hasPasswordless?r("span",[t._v("Send a login link")]):r("span",[t._v("Login to your account")])])],1)])])}),[],!1,null,null,null);e.default=component.exports}}]);