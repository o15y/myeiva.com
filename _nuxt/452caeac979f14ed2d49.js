(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{267:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(100);var o=n(119);function c(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},333:function(t,e,n){"use strict";n.r(e);n(19),n(20),n(13),n(40);var r=n(267),o=(n(34),n(7)),c=n(21),l=n(118),d=n(22),f=n(23),m=n(9),h=n(8),v=n(55);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var w=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){Object(d.a)(v,t);var e,n,f,m,h=y(v);function v(){var t;return Object(c.a)(this,v),(t=h.apply(this,arguments)).newTeam="",t.loading=!1,t.loadingAdd=!1,t.teams={data:[]},t}return Object(l.a)(v,[{key:"created",value:(m=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.get());case 1:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"get",value:(f=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.$axios.get("/users/".concat(this.$route.params.username,"/memberships?first=10").concat(this.teams.data.length?"&after=".concat(this.teams.data[this.teams.data.length-1].id):""));case 4:n=t.sent,data=n.data,(e=this.teams.data).push.apply(e,Object(r.a)(data.data||[])),this.teams.hasMore=data.hasMore,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:this.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return f.apply(this,arguments)})},{key:"add",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingAdd=!0,t.prev=1,t.next=4,this.$axios.put("/organizations",{assistantName:this.newTeam});case 4:t.sent.data,this.newTeam="",t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:return this.loadingAdd=!1,t.abrupt("return",this.get());case 13:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return n.apply(this,arguments)})},{key:"deleteMembership",value:(e=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$buefy.dialog.confirm({title:"Leaving team",message:"Are you sure you want to leave the team <strong>".concat(n,"</strong>? This action is not reversible, and you'll have to request to join this team again if you change your mind."),confirmText:"Yes, leave team",cancelText:"No, don't leave",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.loading=!0,t.prev=1,t.next=4,r.$axios.delete("/users/".concat(r.$route.params.username,"/memberships/").concat(e));case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return r.teams={data:[]},t.abrupt("return",r.get());case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}()});case 1:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),v}(v.b),j=_=w([Object(v.a)({middleware:"authenticated",layout:"users"})],_),x=n(14),component=Object(x.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticClass:"is-size-4"},[t._v("Assistants")]),t._v(" "),n("b-table",{attrs:{loading:t.loading,empty:!t.teams.data.length&&!t.loading,data:t.teams.data,"default-sort-direction":"asc","sort-icon":"arrow-up","sort-icon-size":"is-small",hoverable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{sortable:"",field:"organization.name",label:"Assistant name"}},[t._v("\n        "+t._s(e.row.organization.assistantName)+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{sortable:"",field:"role",label:"Role"}},[t._v("\n        "+t._s(e.row.role)+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{sortable:"",field:"createdAt",label:"Joined"}},[t._v("\n        "+t._s(new Date(e.row.createdAt).toLocaleDateString())+"\n      ")]),t._v(" "),n("b-table-column",{staticClass:"has-text-right"},[n("b-button",{attrs:{type:"is-primary",tag:"nuxt-link",to:"/teams/"+e.row.organization.username}},[t._v("\n          Go to assistant\n        ")]),t._v(" "),n("b-tooltip",{attrs:{label:"Leave team"}},[n("b-button",{attrs:{type:"is-danger","icon-right":"logout"},on:{click:function(n){return t.deleteMembership(e.row.id,e.row.organization.name)}}})],1)],1)]}}])}),t._v(" "),n("div",{staticClass:"has-text-centered"},[t.teams.hasMore?n("b-button",{attrs:{"icon-right":"arrow-down",loading:t.loading},on:{click:t.get}},[t._v("\n      Load more assistants\n    ")]):t._e()],1),t._v(" "),n("h2",{staticClass:"is-size-5",staticStyle:{"margin-top":"1rem"}},[t._v("Create another assistant")]),t._v(" "),n("form",{staticStyle:{margin:"0.5rem 0 1.5rem"},on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[n("b-field",{attrs:{label:"Assistant name"}},[n("b-input",{attrs:{type:"team",required:""},model:{value:t.newTeam,callback:function(e){t.newTeam=e},expression:"newTeam"}})],1),t._v(" "),n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:t.loadingAdd}},[t._v("\n      Create assistant\n    ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);