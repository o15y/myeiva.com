(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{267:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(100);var o=n(119);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},279:function(e,t,n){var content=n(301);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(28).default)("d3b97cc8",content,!0,{sourceMap:!1})},296:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(297)),c=r(n(298)),l=r(n(299)),f=function(e,t){return void 0===t&&(t="https://tse2.mm.bing.net/th?q={query}&w=100&h=100&p=0&dpr=2&adlt=moderate&c=1"),t.replace(/{query}/g,encodeURIComponent(e+" icon"))};t.default=function(e,t){if(!e)return f(e,t);var text,n=(e=(text=e,text.toString().trim().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")).toLowerCase()).includes("|")?e.split("|")[1]:e;return o.default.map((function(i){return i.split("|")[0]})).includes(e)?"https://cdnjs.cloudflare.com/ajax/libs/browser-logos/51.0.13/"+n+"/"+n+"_128x128.png":c.default.includes(e)?"https://unpkg.com/analytics-icons/icons/"+e+".png":l.default.includes(e)?"https://lipis.github.io/flag-icon-css/flags/1x1/"+e+".svg":f(e,t)}},297:function(e){e.exports=JSON.parse('["adblock","aloha","amazon-internet","android-webview-beta","archive","avant","basilisk","brave-beta","brave-dev","brave-nightly","brave","browsh","chrome-beta","chrome-canary","chrome-dev","chrome-devtools","chrome","chromium","cốc-cốc","dolphin","edge-beta","edge-canary","edge-dev","edge-tile","edge","electron","epic","falkon","firefox-beta","firefox-developer-edition","firefox-focus","firefox-lite","firefox-nightly","firefox-reality","firefox-mobile|firefox","firefox","icecat","iridium","jsdom","maxthon","midori","mihtool","min","netsurf","nw.js","opera-beta","opera-developer","opera-mini-beta","opera-mini","opera-neon","opera-touch","opera","otter","pale-moon","phoenix","puffin","qutebrowser","safari-ios","safari-technology-preview","safari","samsung-internet-beta","samsung-internet-gear-vr","samsung-internet","seamonkey","servo","silk","sogou-mobile","tor","uc-mini","uc","v8-ignition","v8-liftoff","v8-orinoco","v8-turbofan","v8","vivaldi-snapshot","vivaldi","web","yandex-alpha","yandex-beta","yandex-lite","yandex"]')},298:function(e){e.exports=JSON.parse('["android","apple","cloudflare-always-online","facebook","facebook-messenger","huawei","instagram","internet-explorer","ios","lg","linux","lyf","mac-os","macos","miui-browser","mobile-internet-explorer","motorola","nokia","obigo-q","oneplus","oppo","os-x","privacy","samsung","twitter","uc-browser","wechat","windows-phone","windows","xiaomi","ahrefsbot","duckduckgo","google","lenovo","vivo","micromax","intex"]')},299:function(e){e.exports=JSON.parse('["ad","ae","af","ag","ai","al","am","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bl","bm","bn","bo","bq","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es-ct","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb-eng","gb-nir","gb-sct","gb-wls","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mf","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tr","tt","tv","tw","tz","ua","ug","um","un","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","xk","ye","yt","za","zm","zw"]')},300:function(e,t,n){"use strict";var r=n(279);n.n(r).a},301:function(e,t,n){(t=n(27)(!1)).push([e.i,"figure.image[data-v-7182de42]{margin-right:.5rem}",""]),e.exports=t},332:function(e,t,n){"use strict";n.r(t);n(19),n(20),n(13),n(40);var r=n(267),o=(n(41),n(34),n(7)),c=n(21),l=n(118),f=n(22),d=n(23),m=n(9),h=n(8),v=n(55),y=n(296),w=n.n(y);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var k=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},j=n(165),O=function(e){Object(f.a)(h,e);var t,n,d,m=x(h);function h(){var e;return Object(c.a)(this,h),(e=m.apply(this,arguments)).loading=!1,e.loadingMore=!1,e.sessions={data:[]},e}return Object(l.a)(h,[{key:"created",value:(d=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get());case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getIcon",value:function(e,t){var n,r;if("CountryCode"===t)return w()(e.countryCode);var o=new j(e.userAgent);return w()(null===(r=null===(n=o["get".concat(t)])||void 0===n?void 0:n.call())||void 0===r?void 0:r.name)}},{key:"getCaption",value:function(e,t){var n,r;return"CountryCode"===t?["city","region"].map((function(i){return e[i]})).filter((function(i){return i})).join(", "):null===(r=null===(n=new j(e.userAgent)["get".concat(t)])||void 0===n?void 0:n.call())||void 0===r?void 0:r.name}},{key:"get",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/users/".concat(this.$route.params.username,"/sessions?first=10&orderBy=id:desc").concat(this.sessions.data.length?"&after=".concat(this.sessions.data[this.sessions.data.length-1].id):""));case 4:n=e.sent,data=n.data,(t=this.sessions.data).push.apply(t,Object(r.a)(data.data||[])),this.sessions.hasMore=data.hasMore,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:this.loading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return n.apply(this,arguments)})},{key:"deleteSession",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$buefy.dialog.confirm({title:"Logging out",message:"Are you sure you want to log out of this session?",confirmText:"Yes, logout",cancelText:"No, don't logout",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,e.prev=1,e.next=4,n.$axios.delete("/users/".concat(n.$route.params.username,"/sessions/").concat(t));case 4:e.sent.data,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return n.sessions={data:[]},e.next=13,n.get();case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),h}(v.b),_=O=k([Object(v.a)({middleware:"authenticated",layout:"users"})],O),C=(n(300),n(14)),component=Object(C.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"is-size-4"},[e._v("Sessions")]),e._v(" "),n("b-table",{attrs:{loading:e.loading&&!e.sessions.data.length,data:e.sessions.data,"default-sort-direction":"asc","sort-icon":"arrow-up","sort-icon-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-table-column",{attrs:{label:"Session"}},e._l(["Browser","OS","CountryCode"],(function(r,i){return n("b-tooltip",{key:"t"+i+r,attrs:{label:e.getCaption(t.row,r)}},[e.getCaption(t.row,r)?n("figure",{staticClass:"image is-24x24"},[n("img",{staticClass:"is-rounded",attrs:{src:e.getIcon(t.row,r)}})]):e._e()])})),1),e._v(" "),n("b-table-column",{attrs:{sortable:"",field:"createdAt",label:"Logged in"}},[e._v(e._s(new Date(t.row.createdAt).toLocaleString()))]),e._v(" "),n("b-table-column",{staticClass:"has-text-right"},[n("b-tooltip",{attrs:{label:"Logout"}},[n("b-button",{attrs:{type:"is-danger","icon-right":"logout-variant"},on:{click:function(n){return e.deleteSession(t.row.id)}}})],1)],1)]}}])}),e._v(" "),n("div",{staticClass:"has-text-centered"},[e.sessions.hasMore?n("b-button",{attrs:{"icon-right":"arrow-down",loading:e.loading},on:{click:e.get}},[e._v("\n      Load more sessions\n    ")]):e._e()],1)],1)}),[],!1,null,"7182de42",null);t.default=component.exports}}]);