(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{281:function(t,e,n){var content=n(305);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("47ce7596",content,!0,{sourceMap:!1})},304:function(t,e,n){"use strict";var r=n(281);n.n(r).a},305:function(t,e,n){(e=n(27)(!1)).push([t.i,".logs[data-v-4af1f6ab]{max-width:600px;font-size:90%;overflow:auto;word-wrap:break-word;white-space:nowrap;font-family:monospace}.avatar img[data-v-4af1f6ab]{box-shadow:0 .25rem .5rem rgba(0,0,0,.1)}.avatar[data-v-4af1f6ab]{margin:0 -10px}table[data-v-4af1f6ab]{width:100%}table td[data-v-4af1f6ab]:first-child{font-weight:700}",""]),t.exports=e},347:function(t,e,n){"use strict";n.r(e);n(19),n(20),n(40),n(76),n(35),n(13),n(45),n(41),n(56),n(67),n(34);var r=n(7),o=n(21),c=n(118),l=n(22),_=n(23),d=n(9),m=n(8),v=n(55),f=n(47);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}var h=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},w=function(t){Object(l.a)(d,t);var e,n,_=y(d);function d(){var t;return Object(o.a)(this,d),(t=_.apply(this,arguments)).loading=!1,t.meeting={emails:[]},t.opened=[],t}return Object(c.a)(d,[{key:"mounted",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.get());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"get",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.$axios.get("/organizations/".concat(this.$route.params.username,"/meetings/").concat(this.$route.params.id,"?include=incoming_emails"));case 4:e=t.sent,data=e.data,this.meeting=data,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return e.apply(this,arguments)})},{key:"toggleOpened",value:function(t){this.opened.includes(t)?this.opened=this.opened.filter((function(i){return i!==t})):this.opened.push(t)}},{key:"cleanLogs",value:function(t){try{return JSON.parse(t||"[]")}catch(t){}return[]}},{key:"emailify",value:function(t){var e,n;try{var r=JSON.parse(t);return Array.isArray(r)&&null!==(n=(null!==(e=r.map((function(i){return"".concat(i.name?"".concat(i.name," ("):"").concat(i.address).concat(i.name?")":"")})).join(", "))&&void 0!==e?e:"").trim())&&void 0!==n?n:"(empty)"}catch(t){}return"(empty)"}},{key:"locationName",value:function(t){if(t=t||{},"object"===Object(m.a)(t)&&t.data){var data={};try{data=JSON.parse(t.data)}catch(t){}if(data.template){var e=data.template;if(Object.keys(data).forEach((function(t){e=e.replace("{{".concat(t,"}}"),data[t])})),Object.keys(t).forEach((function(n){e=e.replace("{{".concat(n,"}}"),t[n])})),e)return e}}return t.value}},{key:"guestName",get:function(){return JSON.parse(this.meeting.guests||"[]").map((function(i){return i.name})).join(", ")}},{key:"guestPicture",get:function(){return JSON.parse(this.meeting.guests||"[]").map((function(i){var t;return null===(t=i.person)||void 0===t?void 0:t.avatar})).join(", ")}},{key:"meetingStatus",get:function(){try{return this.meeting.confirmedTime?(new Date).getTime()>new Date(this.meeting.confirmedTime).getTime()?"PAST":"CONFIRMED":"PENDING"}catch(t){}return"PENDING"}}]),d}(v.b),k=w=h([Object(v.a)({middleware:"authenticated",layout:"teams",computed:Object(f.b)({user:"auth/user"})})],w),O=(n(304),n(14)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{active:t.loading}}),t._v(" "),n("div",{staticStyle:{"margin-bottom":"1.5rem",display:"flex","margin-left":"1rem"}},[t.user&&t.user.details&&t.user.details.profilePicture||t.user.details.name?n("figure",{staticClass:"image avatar is-64x64"},[n("img",{staticClass:"is-rounded",attrs:{src:t.user.details.profilePicture||"https://ui-avatars.com/api/?name="+t.user.details.name+"&background=3498db&color=fff"}})]):t._e(),t._v(" "),t.guestPicture||t.guestName?n("figure",{staticClass:"image avatar is-64x64"},[n("img",{staticClass:"is-rounded",attrs:{src:t.guestPicture||"https://ui-avatars.com/api/?name="+t.guestName+"&background=e74c3c&color=fff"}})]):t._e()]),t._v(" "),t.guestName?n("h1",{staticClass:"is-size-4",staticStyle:{"margin-bottom":"1rem"}},[t._v("\n    Meeting with "+t._s(t.guestName)+"\n  ")]):n("h1",{staticClass:"is-size-4",staticStyle:{"margin-bottom":"1rem"}},[t._v("Meeting")]),t._v(" "),t.meeting.id?n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("td",[t._v("Status")]),t._v(" "),n("td",["CONFIRMED"===t.meetingStatus?n("span",{staticClass:"is-flex"},[n("b-icon",{attrs:{icon:"check-circle",type:"is-success"}}),t._v(" "),n("span",{staticStyle:{"margin-left":"0.5rem"}},[t._v("Confirmed")])],1):"PAST"===t.meetingStatus?n("span",{staticClass:"is-flex"},[n("b-icon",{attrs:{icon:"check-circle",type:"is-success"}}),t._v(" "),n("span",{staticStyle:{"margin-left":"0.5rem"}},[t._v("Completed")])],1):n("span",{staticClass:"is-flex"},[n("b-icon",{attrs:{icon:"clock",type:"is-warning"}}),t._v(" "),n("span",{staticStyle:{"margin-left":"0.5rem"}},[t._v("Awaiting confirmation")])],1)])]),t._v(" "),t.meeting.confirmedTime?n("tr",[n("td",[t._v("Confirmed time")]),t._v(" "),n("td",[t._v(t._s(new Date(t.meeting.confirmedTime).toLocaleString()))])]):t._e(),t._v(" "),n("tr",[n("td",[t._v("Duration")]),t._v(" "),n("td",[t._v(t._s(t.meeting.duration)+" minutes")])]),t._v(" "),n("tr",[n("td",[t._v("Meeting type")]),t._v(" "),n("td",{staticStyle:{"text-transform":"capitalize"}},[t._v("\n          "+t._s(((t.meeting.location||{}).type||"").replace("_"," ").toLowerCase())+"\n        ")])]),t._v(" "),n("tr",[n("td",[t._v("Location")]),t._v(" "),n("td",[t._v(t._s(t.locationName(t.meeting.location)))])])])]):t._e(),t._v(" "),n("h2",{staticClass:"is-size-5",staticStyle:{margin:"1rem 0"}},[t._v("Guests")]),t._v(" "),t._l(JSON.parse(t.meeting.guests||"[]")||[],(function(e,i){return n("div",{key:"g"+i},[n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("td",[t._v("Name")]),t._v(" "),n("td",[t._v(t._s(e.name))])]),t._v(" "),n("tr",[n("td",[t._v("Email")]),t._v(" "),n("td",[t._v(t._s(e.address))])]),t._v(" "),e.person&&e.person.location?n("tr",[n("td",[t._v("Location")]),t._v(" "),n("td",[t._v(t._s(e.person.location))])]):t._e(),t._v(" "),e.person&&e.person.bio?n("tr",[n("td",[t._v("About")]),t._v(" "),n("td",[t._v(t._s(e.person.bio))])]):t._e(),t._v(" "),e.person&&e.person.timezone?n("tr",[n("td",[t._v("Timezone")]),t._v(" "),n("td",[t._v(t._s(e.person.timezone))])]):t._e(),t._v(" "),e.person&&e.person.site?n("tr",[n("td",[t._v("Website")]),t._v(" "),n("td",[t._v(t._s(e.person.site))])]):t._e(),t._v(" "),e.person&&e.person.employment?n("tr",[n("td",[t._v("Employment")]),t._v(" "),n("td",[t._v("\n            "+t._s(e.person.employment.title)+",\n            "+t._s(e.person.employment.name)+"\n          ")])]):t._e(),t._v(" "),e.person?n("tr",[n("td",[t._v("Profiles")]),t._v(" "),n("td",[e.person.facebook&&e.person.facebook.handle?n("a",{attrs:{target:"_blank",href:"https://www.facebook.com/"+e.person.facebook.handle}},[n("b-icon",{attrs:{icon:"facebook"}})],1):t._e(),t._v(" "),e.person.linkedin&&e.person.linkedin.handle?n("a",{attrs:{target:"_blank",href:"https://linkedin.com/"+e.person.linkedin.handle}},[n("b-icon",{attrs:{icon:"linkedin"}})],1):t._e(),t._v(" "),e.person.github&&e.person.github.handle?n("a",{attrs:{target:"_blank",href:"https://github.com/"+e.person.github.handle}},[n("b-icon",{attrs:{icon:"github"}})],1):t._e(),t._v(" "),e.person.twitter&&e.person.twitter.handle?n("a",{attrs:{target:"_blank",href:"https://twitter.com/"+e.person.twitter.handle}},[n("b-icon",{attrs:{icon:"twitter"}})],1):t._e()])]):t._e()])]),t._v(" "),e.company?n("h3",{staticClass:"is-size-6",staticStyle:{margin:"1rem 0"}},[t._v("\n      Organization\n    ")]):t._e(),t._v(" "),e.company?n("table",{staticClass:"table"},[n("tbody",[e.company.name?n("tr",[n("td",[t._v("Name")]),t._v(" "),n("td",[t._v(t._s(e.company.name))])]):t._e(),t._v(" "),e.company.description?n("tr",[n("td",[t._v("About")]),t._v(" "),n("td",[t._v(t._s(e.company.description))])]):t._e(),t._v(" "),e.company.domain?n("tr",[n("td",[t._v("Website")]),t._v(" "),n("td",[t._v(t._s(e.company.domain))])]):t._e(),t._v(" "),e.company.tags?n("tr",[n("td",[t._v("Tags")]),t._v(" "),n("td",[t._v(t._s((e.company.tags||[]).join(", ")))])]):t._e(),t._v(" "),e.company.foundedYear?n("tr",[n("td",[t._v("Founded")]),t._v(" "),n("td",[t._v(t._s(e.company.foundedYear))])]):t._e(),t._v(" "),e.company.location?n("tr",[n("td",[t._v("Location")]),t._v(" "),n("td",[t._v(t._s(e.company.location))])]):t._e(),t._v(" "),e.company.timeZone?n("tr",[n("td",[t._v("Timezone")]),t._v(" "),n("td",[t._v(t._s(e.company.timeZone))])]):t._e(),t._v(" "),n("tr",[n("td",[t._v("Profiles")]),t._v(" "),n("td",[e.company.facebook&&e.company.facebook.handle?n("a",{attrs:{target:"_blank",href:"https://www.facebook.com/"+e.company.facebook.handle}},[n("b-icon",{attrs:{icon:"facebook"}})],1):t._e(),t._v(" "),e.company.linkedin&&e.company.linkedin.handle?n("a",{attrs:{target:"_blank",href:"https://linkedin.com/"+e.company.linkedin.handle}},[n("b-icon",{attrs:{icon:"linkedin"}})],1):t._e(),t._v(" "),e.company.twitter&&e.company.twitter.handle?n("a",{attrs:{target:"_blank",href:"https://twitter.com/"+e.company.twitter.handle}},[n("b-icon",{attrs:{icon:"twitter"}})],1):t._e()])])])]):t._e()])})),t._v(" "),n("h2",{staticClass:"is-size-5",staticStyle:{margin:"1rem 0"}},[t._v("Emails")]),t._v(" "),n("b-table",{attrs:{data:t.meeting.emails,"opened-detailed":t.opened,detailed:"","detail-key":"id","default-sort-direction":"asc","sort-icon":"arrow-up","sort-icon-size":"is-small"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{sortable:"",field:"emailType",label:"Email type"}},[n("span",{staticClass:"is-flex"},["ERROR"===e.row.status?n("b-tooltip",{attrs:{label:"Error"}},[n("b-icon",{attrs:{icon:"alert",type:"is-danger"}})],1):t._e(),t._v(" "),"INCOMING"===e.row.emailType&&"SUCCESS"===e.row.status?n("b-tooltip",{attrs:{label:"Processed"}},[n("b-icon",{attrs:{icon:"check-circle",type:"is-success"}})],1):t._e(),t._v(" "),"INCOMING"===e.row.emailType&&"PENDING"===e.row.status?n("b-tooltip",{attrs:{label:"Pending"}},[n("b-icon",{attrs:{icon:"clock",type:"is-warning"}})],1):t._e(),t._v(" "),"OUTGOING"===e.row.emailType&&"SUCCESS"===e.row.status?n("b-tooltip",{attrs:{label:"Read"}},[n("b-icon",{attrs:{icon:"check-circle",type:"is-info"}})],1):t._e(),t._v(" "),"OUTGOING"===e.row.emailType&&"PENDING"===e.row.status?n("b-tooltip",{attrs:{label:"Sent"}},[n("b-icon",{attrs:{icon:"check-circle",type:"is-success"}})],1):t._e(),t._v(" "),n("span",{staticStyle:{"margin-left":"0.5rem","text-transform":"capitalize"}},[t._v("\n            "+t._s((e.row.emailType||"").toLowerCase())+"\n          ")])],1)]),t._v(" "),n("b-table-column",{attrs:{sortable:"",field:"createdAt",label:"Date"}},[t._v("\n        "+t._s(new Date(e.row.createdAt).toLocaleString())+"\n      ")]),t._v(" "),n("b-table-column",{staticClass:"has-text-right"},[n("b-button",{attrs:{type:"is-primary","icon-left":"eye"},on:{click:function(n){return t.toggleOpened(e.row.id)}}},[n("span",[t._v("Details")])])],1)]}},{key:"detail",fn:function(e){return[n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("td",[t._v("Subject")]),t._v(" "),n("td",[t._v(t._s(e.row.subject))])]),t._v(" "),n("tr",[n("td",[t._v("From")]),t._v(" "),n("td",[t._v(t._s(t.emailify(e.row.from)||"(empty)"))])]),t._v(" "),n("tr",[n("td",[t._v("To")]),t._v(" "),n("td",[t._v(t._s(t.emailify(e.row.to)||"(empty)"))])]),t._v(" "),n("tr",[n("td",[t._v("CC")]),t._v(" "),n("td",[t._v(t._s(t.emailify(e.row.cc)||"(empty)"))])])])]),t._v(" "),n("div",{staticClass:"logs",staticStyle:{"margin-top":"1.5rem"}},t._l(t.cleanLogs(e.row.logs),(function(r,i){return n("div",{key:"l"+i+e.row.id},[t._v("\n          "+t._s(r)+"\n        ")])})),0)]}}])})],2)}),[],!1,null,"4af1f6ab",null);e.default=component.exports}}]);